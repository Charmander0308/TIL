<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Dog API</title>
  </head>
  <body>
    <div>
      <h1>Dog API</h1>
      <div>
        <button id="btn1">XMLHttpRequest</button>
        <button id="btn2">Fetch</button>
      </div>
      <div>
        <img src="" alt="" id="dog-img" />
      </div>
    </div>
    <script>
      const URL = 'https://dog.ceo/api/breeds/image/random';

      // XML 방식은 해보자~~
      document.querySelector("#btn1").addEventListener('click', () =>{
        const xhr = new XMLHttpRequest()
        xhr.open("GET", URL)
        xhr.send()
        xhr.onreadystatechange = function(){
          if(xhr.readyState === xhr.DONE){
            if(xhr.status === 200){
              const data = JSON.parse(xhr.response)
              // console.log(data)
              document.querySelector("#dog-img")
              .setAttribute("src", data.message)
            } else {
              console.log("오류발생!!")
            }
          }
        }
      })

      document.querySelector("#btn2").addEventListener('click', () =>{
        fetch(URL)
          .then((response) => {
            // console.log(response.text())
            // console.log(response.json())
            return response.json()
          }).then((imgData)=>{
            document.querySelector("#dog-img")
            .setAttribute("src", imgData.message)
          })
      })

    </script>
  </body>
</html>
